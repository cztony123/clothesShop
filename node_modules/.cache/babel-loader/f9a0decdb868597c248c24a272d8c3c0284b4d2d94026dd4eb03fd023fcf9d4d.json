{"ast":null,"code":"import \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.array.unshift.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport { getStockData, getStockDel } from '@/api/stockManageApi';\nimport stockDialog from \"./model/index.vue\";\nexport default {\n  components: {\n    stockDialog: stockDialog\n  },\n  data: function data() {\n    return {\n      form: {\n        teaName: ''\n      },\n      page: {\n        pageNum: 1,\n        pageSize: 10\n      },\n      total: 0,\n      dataList: [],\n      unitList: [{\n        id: 1,\n        name: 'kg'\n      }, {\n        id: 2,\n        name: 'g'\n      }, {\n        id: 3,\n        name: 't'\n      }],\n      levelList: [{\n        id: 1,\n        name: 'A'\n      }, {\n        id: 2,\n        name: 'B'\n      }, {\n        id: 3,\n        name: 'C'\n      }, {\n        id: 4,\n        name: 'D'\n      }],\n      isData: [{\n        id: '001',\n        name: '张三',\n        age: 18\n      }, {\n        id: '002',\n        name: '李四',\n        age: 19\n      }, {\n        id: '003',\n        name: '王五',\n        age: 20\n      }]\n    };\n  },\n  created: function created() {\n    this.handleQuery();\n  },\n  methods: {\n    btn: function btn() {\n      var p = {\n        id: '004',\n        name: '老刘',\n        age: 40\n      };\n      this.isData.unshift(p);\n    },\n    //处理单位和等级\n    handeleData: function handeleData(val, lable) {\n      var isData = lable == 'unit' ? this.unitList : this.levelList;\n      var obj = isData.find(function (item) {\n        return item.id == val;\n      });\n      return obj.name;\n    },\n    //查询按钮\n    handleQuery: function handleQuery() {\n      var _this = this;\n      getStockData(this.form).then(function (res) {\n        if (res.code == 200) {\n          _this.dataList = res.data;\n          _this.total = res.total;\n        }\n      });\n    },\n    //重置按钮\n    resetQuery: function resetQuery() {\n      this.form = {};\n    },\n    //新增按钮\n    handleAdd: function handleAdd() {\n      this.$refs.isDialog.open();\n    },\n    //编辑按钮\n    handleEdit: function handleEdit(row) {\n      this.$refs.isDialog.open(row);\n    },\n    //删除按钮\n    handleDel: function handleDel(row) {\n      var _this2 = this;\n      this.$confirm(\"\\u786E\\u8BA4\\u5220\\u9664 \".concat(row.teaName, \" \\u5417\\uFF1F\"), '删除提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        getStockDel({\n          id: row.id\n        }).then(function (res) {\n          if (res.code == 200) {\n            _this2.handleQuery();\n            _this2.$message.success(res.message);\n          }\n        });\n      })[\"catch\"](function () {});\n    },\n    //选择每页多少条按钮\n    handleSizeChange: function handleSizeChange(val) {\n      this.page.pageSize = val;\n      this.handleQuery();\n    },\n    //第几页按钮\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.page.pageNum = val;\n      this.handleQuery();\n    }\n  }\n};","map":{"version":3,"names":["getStockData","getStockDel","stockDialog","components","data","form","teaName","page","pageNum","pageSize","total","dataList","unitList","id","name","levelList","isData","age","created","handleQuery","methods","btn","p","unshift","handeleData","val","lable","obj","find","item","_this","then","res","code","resetQuery","handleAdd","$refs","isDialog","open","handleEdit","row","handleDel","_this2","$confirm","concat","confirmButtonText","cancelButtonText","type","$message","success","message","handleSizeChange","handleCurrentChange"],"sources":["src/views/stockManage/stockQuery.vue"],"sourcesContent":["<template>\n    <div class=\"stock-page\">\n        <el-form :inline=\"true\">\n            <el-form-item label=\"茶品名称\">\n                <el-input v-model=\"form.teaName\" size=\"small\" clearable placeholder=\"请输入茶品名称\"></el-input>\n            </el-form-item>\n\n            <el-form-item>\n                <el-button type=\"primary\" size=\"small\" @click=\"handleQuery\">查询</el-button>\n                <el-button size=\"small\" @click=\"resetQuery\">重置</el-button>\n                <el-button type=\"primary\" size=\"small\" @click=\"handleAdd\">新增</el-button>\n            </el-form-item>\n        </el-form>\n\n        <el-table :data=\"dataList\" style=\"width: 100%\">\n            <el-table-column label=\"茶品名称\" prop=\"teaName\" align=\"center\" />\n            <el-table-column label=\"单位\" prop=\"unit\" align=\"center\">\n                <template slot-scope=\"{ row }\">\n                    {{ handeleData(row.unit, 'unit') }}\n                </template>\n            </el-table-column>\n            <el-table-column label=\"等级\" prop=\"level\" align=\"center\">\n                <template slot-scope=\"{ row }\">\n                    {{ handeleData(row.level, 'level') }}级\n                </template>\n            </el-table-column>\n            <el-table-column label=\"库存\" prop=\"reality\" align=\"center\">\n                <template slot-scope=\"{ row }\">\n                    {{ row.reality }}{{ handeleData(row.unit, 'unit') }}\n                </template>\n            </el-table-column>\n            <el-table-column label=\"平均成本\" prop=\"userId\" align=\"center\">\n                <template slot-scope=\"{ row }\">\n                    ${{ (row.totalCost / row.reality).toFixed(2) }}\n                </template>\n            </el-table-column>\n            <el-table-column label=\"总成本\" prop=\"totalCost\" align=\"center\">\n                <template slot-scope=\"{ row }\">\n                    ${{ row.totalCost }}\n                </template>\n            </el-table-column>\n            <el-table-column label=\"操作\" align=\"center\" width=\"150\">\n                <template slot-scope=\"{ row }\">\n                    <el-button size=\"small\" type=\"text\" @click=\"handleEdit(row)\">编辑</el-button>\n                    <el-button size=\"small\" type=\"text\" @click=\"handleDel(row)\"> 删除</el-button>\n                </template>\n            </el-table-column>\n        </el-table>\n\n        <el-pagination v-if=\"total > 0\" @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page=\"page.pageNum\" :page-sizes=\"[10, 20, 30, 500]\" :page-size=\"10\" layout=\"total, sizes, prev, pager, next, jumper\" :total=\"total\" />\n\n        <stockDialog ref=\"isDialog\" @success=\"handleQuery\" />\n\n        <button @click=\"btn\">新增</button>\n        <ul>\n            <li v-for=\"(item, index) in isData\" :key=\"index\">\n                {{item.name}} - {{item.age}} <input type=\"text\">\n            </li>\n        </ul>\n    </div>\n</template>\n\n<script>\nimport { getStockData, getStockDel } from '@/api/stockManageApi'\nimport stockDialog from \"./model/index.vue\";\nexport default {\n    components: {\n        stockDialog\n    },\n    data() {\n        return {\n            form: {\n                teaName: ''\n            },\n            page: {\n                pageNum: 1,\n                pageSize: 10\n            },\n            total: 0,\n            dataList: [],\n            unitList: [\n                { id: 1, name: 'kg' },\n                { id: 2, name: 'g' },\n                { id: 3, name: 't' },\n            ],\n            levelList: [\n                { id: 1, name: 'A' },\n                { id: 2, name: 'B' },\n                { id: 3, name: 'C' },\n                { id: 4, name: 'D' },\n            ],\n\n            isData: [\n                { id: '001', name: '张三', age: 18 },\n                { id: '002', name: '李四', age: 19 },\n                { id: '003', name: '王五', age: 20 },\n            ]\n        }\n    },\n\n    created() {\n        this.handleQuery()\n    },\n\n    methods: {\n        btn(){\n            const p = {id: '004', name: '老刘', age: 40}\n            this.isData.unshift(p)\n        },\n        //处理单位和等级\n        handeleData(val, lable) {\n            let isData = lable == 'unit' ? this.unitList : this.levelList\n            let obj = isData.find(item => item.id == val)\n            return obj.name\n        },\n\n        //查询按钮\n        handleQuery() {\n            getStockData(this.form).then(res => {\n                if (res.code == 200) {\n                    this.dataList = res.data\n                    this.total = res.total\n                }\n            })\n        },\n\n        //重置按钮\n        resetQuery() {\n            this.form = {}\n        },\n\n        //新增按钮\n        handleAdd() {\n            this.$refs.isDialog.open()\n        },\n\n        //编辑按钮\n        handleEdit(row) {\n            this.$refs.isDialog.open(row)\n        },\n\n        //删除按钮\n        handleDel(row) {\n            this.$confirm(`确认删除 ${row.teaName} 吗？`, '删除提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n            }).then(() => {\n                getStockDel({ id: row.id }).then(res => {\n                    if(res.code == 200){\n                        this.handleQuery()\n                        this.$message.success(res.message)\n                    }\n                })\n            }).catch(() => {});\n        },\n\n        //选择每页多少条按钮\n        handleSizeChange(val) {\n            this.page.pageSize = val\n            this.handleQuery()\n        },\n\n        //第几页按钮\n        handleCurrentChange(val) {\n            this.page.pageNum = val\n            this.handleQuery()\n        },\n    }\n}\n</script>\n\n<style scoped lang=\"scss\">\n::v-deep .el-table .el-table__cell {\n    padding: 8px 0;\n}\n.el-pagination {\n    display: flex;\n    justify-content: flex-end;\n    margin-top: 15px;\n}\n</style>"],"mappings":";;;;AA+DA,SAAAA,YAAA,EAAAC,WAAA;AACA,OAAAC,WAAA;AACA;EACAC,UAAA;IACAD,WAAA,EAAAA;EACA;EACAE,IAAA,WAAAA,KAAA;IACA;MACAC,IAAA;QACAC,OAAA;MACA;MACAC,IAAA;QACAC,OAAA;QACAC,QAAA;MACA;MACAC,KAAA;MACAC,QAAA;MACAC,QAAA,GACA;QAAAC,EAAA;QAAAC,IAAA;MAAA,GACA;QAAAD,EAAA;QAAAC,IAAA;MAAA,GACA;QAAAD,EAAA;QAAAC,IAAA;MAAA,EACA;MACAC,SAAA,GACA;QAAAF,EAAA;QAAAC,IAAA;MAAA,GACA;QAAAD,EAAA;QAAAC,IAAA;MAAA,GACA;QAAAD,EAAA;QAAAC,IAAA;MAAA,GACA;QAAAD,EAAA;QAAAC,IAAA;MAAA,EACA;MAEAE,MAAA,GACA;QAAAH,EAAA;QAAAC,IAAA;QAAAG,GAAA;MAAA,GACA;QAAAJ,EAAA;QAAAC,IAAA;QAAAG,GAAA;MAAA,GACA;QAAAJ,EAAA;QAAAC,IAAA;QAAAG,GAAA;MAAA;IAEA;EACA;EAEAC,OAAA,WAAAA,QAAA;IACA,KAAAC,WAAA;EACA;EAEAC,OAAA;IACAC,GAAA,WAAAA,IAAA;MACA,IAAAC,CAAA;QAAAT,EAAA;QAAAC,IAAA;QAAAG,GAAA;MAAA;MACA,KAAAD,MAAA,CAAAO,OAAA,CAAAD,CAAA;IACA;IACA;IACAE,WAAA,WAAAA,YAAAC,GAAA,EAAAC,KAAA;MACA,IAAAV,MAAA,GAAAU,KAAA,kBAAAd,QAAA,QAAAG,SAAA;MACA,IAAAY,GAAA,GAAAX,MAAA,CAAAY,IAAA,WAAAC,IAAA;QAAA,OAAAA,IAAA,CAAAhB,EAAA,IAAAY,GAAA;MAAA;MACA,OAAAE,GAAA,CAAAb,IAAA;IACA;IAEA;IACAK,WAAA,WAAAA,YAAA;MAAA,IAAAW,KAAA;MACA9B,YAAA,MAAAK,IAAA,EAAA0B,IAAA,WAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACAH,KAAA,CAAAnB,QAAA,GAAAqB,GAAA,CAAA5B,IAAA;UACA0B,KAAA,CAAApB,KAAA,GAAAsB,GAAA,CAAAtB,KAAA;QACA;MACA;IACA;IAEA;IACAwB,UAAA,WAAAA,WAAA;MACA,KAAA7B,IAAA;IACA;IAEA;IACA8B,SAAA,WAAAA,UAAA;MACA,KAAAC,KAAA,CAAAC,QAAA,CAAAC,IAAA;IACA;IAEA;IACAC,UAAA,WAAAA,WAAAC,GAAA;MACA,KAAAJ,KAAA,CAAAC,QAAA,CAAAC,IAAA,CAAAE,GAAA;IACA;IAEA;IACAC,SAAA,WAAAA,UAAAD,GAAA;MAAA,IAAAE,MAAA;MACA,KAAAC,QAAA,6BAAAC,MAAA,CAAAJ,GAAA,CAAAlC,OAAA;QACAuC,iBAAA;QACAC,gBAAA;QACAC,IAAA;MACA,GAAAhB,IAAA;QACA9B,WAAA;UAAAY,EAAA,EAAA2B,GAAA,CAAA3B;QAAA,GAAAkB,IAAA,WAAAC,GAAA;UACA,IAAAA,GAAA,CAAAC,IAAA;YACAS,MAAA,CAAAvB,WAAA;YACAuB,MAAA,CAAAM,QAAA,CAAAC,OAAA,CAAAjB,GAAA,CAAAkB,OAAA;UACA;QACA;MACA;IACA;IAEA;IACAC,gBAAA,WAAAA,iBAAA1B,GAAA;MACA,KAAAlB,IAAA,CAAAE,QAAA,GAAAgB,GAAA;MACA,KAAAN,WAAA;IACA;IAEA;IACAiC,mBAAA,WAAAA,oBAAA3B,GAAA;MACA,KAAAlB,IAAA,CAAAC,OAAA,GAAAiB,GAAA;MACA,KAAAN,WAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}