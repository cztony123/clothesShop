{"ast":null,"code":"import _objectSpread from \"/Applications/project/admin-manager/admin-manager/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport { getGameNameList, editgameState, getDataList } from '@/api/gameManageApi';\nimport DateRangeShortcut from '../../components/DateRangeShortcut/index.vue';\nimport Details from './model/index.vue';\nimport moment from \"moment\";\nexport default {\n  components: {\n    DateRangeShortcut: DateRangeShortcut,\n    Details: Details\n  },\n  data: function data() {\n    return {\n      dateRange: [],\n      value: '100',\n      form: {\n        gameName: null,\n        //游戏名称\n        gameRoomId: null,\n        //牌局编号\n        startTime: null,\n        //开始时间\n        endTime: null,\n        //结束时间\n        pageNum: 1,\n        //第几页\n        pageSize: 10 //每页条数\n      },\n      gameNameList: [],\n      dataList: [],\n      total: 0\n    };\n  },\n  created: function created() {\n    this.handelSelect();\n    this.handleQuery();\n  },\n  methods: {\n    //游戏名称下拉列表\n    handelSelect: function handelSelect() {\n      var _this = this;\n      getGameNameList().then(function (res) {\n        if (res.code == 200) {\n          _this.gameNameList = res.data;\n        }\n      });\n    },\n    //处理游戏名称\n    handeleGameName: function handeleGameName(gameName) {\n      var obj = this.gameNameList.find(function (item) {\n        return item.id == gameName;\n      });\n      return obj ? obj.name : '';\n    },\n    //查询按钮\n    handleQuery: function handleQuery() {\n      var _this2 = this;\n      this.dataList = [];\n      var params = _objectSpread({}, this.form);\n      params.startTime = moment(this.dateRange[0]).startOf(\"day\").format('YYYY-MM-DD HH:mm:ss');\n      params.endTime = moment(this.dateRange[1]).endOf(\"day\").format('YYYY-MM-DD HH:mm:ss');\n      getDataList(params).then(function (res) {\n        if (res.code == 200) {\n          _this2.dataList = res.result;\n          console.log(_this2.dataList);\n          _this2.total = res.total;\n        }\n      });\n    },\n    //重置按钮\n    resetQuery: function resetQuery() {\n      this.form = {};\n      this.dateRange = [];\n    },\n    //修改状态\n    handelState: function handelState(row) {\n      var _this3 = this;\n      this.$confirm(\"\\u786E\\u8BA4\".concat(row.state == 0 ? '开启' : '关闭', \" \").concat(row.userName, \" \\u7684\\u72B6\\u6001\\u5417?\"), '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        var params = {\n          userId: row.userId,\n          state: row.state\n        };\n        console.log(params);\n        editgameState(params).then(function (res) {\n          if (res.code == 200) {\n            _this3.$message.success(\"\".concat(row.state == 0 ? '开启' : '关闭', \"\\u6210\\u529F!\"));\n            _this3.handleQuery();\n          }\n        });\n      })[\"catch\"](function () {\n        row.state == 0 ? row.state = '1' : row.state = '0';\n      });\n    },\n    //明细按钮\n    handleClick: function handleClick(row) {\n      this.$refs.isDetails.open({\n        gameName: this.handeleGameName(row.gameName),\n        userName: row.userName,\n        gameRoomId: row.gameRoomId,\n        userId: row.userId\n      });\n    },\n    handleSizeChange: function handleSizeChange(val) {\n      this.form.pageSize = val;\n      this.handleQuery();\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.form.pageNum = val;\n      this.handleQuery();\n    }\n  }\n};","map":{"version":3,"names":["getGameNameList","editgameState","getDataList","DateRangeShortcut","Details","moment","components","data","dateRange","value","form","gameName","gameRoomId","startTime","endTime","pageNum","pageSize","gameNameList","dataList","total","created","handelSelect","handleQuery","methods","_this","then","res","code","handeleGameName","obj","find","item","id","name","_this2","params","_objectSpread","startOf","format","endOf","result","console","log","resetQuery","handelState","row","_this3","$confirm","concat","state","userName","confirmButtonText","cancelButtonText","type","userId","$message","success","handleClick","$refs","isDetails","open","handleSizeChange","val","handleCurrentChange"],"sources":["src/views/gameManage/index.vue"],"sourcesContent":["<template>\r\n    <div class=\"order-page\">\r\n        <el-form :inline=\"true\">\r\n            <el-form-item>\r\n                <date-range-shortcut v-model=\"dateRange\"></date-range-shortcut>\r\n            </el-form-item>\r\n            <el-form-item label=\"选择时间\">\r\n                <el-date-picker v-model=\"dateRange\" size=\"small\" type=\"datetimerange\" range-separator=\"至\" start-placeholder=\"开始日期\" end-placeholder=\"结束日期\"></el-date-picker>\r\n            </el-form-item>\r\n            <el-form-item label=\"游戏名称\">\r\n                <el-select v-model=\"form.gameName\" size=\"small\" placeholder=\"请选择\">\r\n                    <el-option v-for=\"item in gameNameList\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\"></el-option>\r\n                </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"牌局编号\">\r\n                <el-input v-model=\"form.gameRoomId\" size=\"small\" clearable placeholder=\"请输入牌局编号\"></el-input>\r\n            </el-form-item>\r\n\r\n            <el-form-item>\r\n                <el-button type=\"primary\" size=\"small\" @click=\"handleQuery\">查询</el-button>\r\n                <el-button size=\"small\" @click=\"resetQuery\">重置</el-button>\r\n            </el-form-item>\r\n        </el-form>\r\n\r\n        <el-table :data=\"dataList\" style=\"width: 100%\">\r\n            <el-table-column prop=\"userId\" label=\"会员ID\" align=\"center\" />handeleData\r\n            <el-table-column prop=\"gameName\" label=\"游戏名称\" align=\"center\">\r\n                <template slot-scope=\"{row}\">\r\n                    {{ handeleGameName( row.gameName ) }}\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"userName\" label=\"会员昵称\" align=\"center\" />\r\n            <el-table-column prop=\"gameRoomId\" label=\"牌局编号\" align=\"center\" />\r\n            <el-table-column prop=\"participatingPeople\" label=\"参与人数\" align=\"center\" />\r\n            <el-table-column prop=\"integral\" label=\"积分\" align=\"center\" />\r\n            <el-table-column prop=\"state\" label=\"状态\" align=\"center\">\r\n                <template slot-scope=\"{ row }\">\r\n                    {{row.state == 0 ? '开启' : '关闭'}}\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"startTime\" label=\"开始时间\" align=\"center\" width=\"170px\"/>\r\n            <el-table-column prop=\"endTime\" label=\"结束时间\" align=\"center\" width=\"170px\"/>\r\n            <el-table-column label=\"操作\" align=\"center\" width=\"180\">\r\n                <template slot-scope=\"{ row }\">\r\n                    <el-switch v-model=\"row.state\" active-value=\"0\" inactive-value=\"1\" @change=\"handelState(row)\" style=\"margin-right:15px\"></el-switch>\r\n                    <el-button @click=\"handleClick(row)\" type=\"text\" size=\"small\" :disabled=\"row.development\">明细</el-button>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n\r\n        <el-pagination\r\n            v-if=\"total > 0\"\r\n            @size-change=\"handleSizeChange\" \r\n            @current-change=\"handleCurrentChange\" \r\n            :current-page=\"form.pageNum\" \r\n            :page-sizes=\"[10, 20, 30, 500]\" \r\n            :page-size=\"10\" \r\n            layout=\"total, sizes, prev, pager, next, jumper\" \r\n            :total=\"total\"\r\n        />\r\n\r\n        <Details ref=\"isDetails\" @success=\"handleQuery\" />\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { getGameNameList, editgameState, getDataList } from '@/api/gameManageApi'\r\nimport DateRangeShortcut from '../../components/DateRangeShortcut/index.vue'\r\nimport Details from './model/index.vue'\r\nimport moment from \"moment\";\r\nexport default {\r\n    components: {\r\n        DateRangeShortcut,\r\n        Details\r\n    },\r\n    data() {\r\n        return {\r\n            dateRange: [],\r\n            value: '100',\r\n            form: {\r\n                gameName: null, //游戏名称\r\n                gameRoomId: null, //牌局编号\r\n                startTime: null, //开始时间\r\n                endTime: null, //结束时间\r\n                pageNum: 1, //第几页\r\n                pageSize: 10 //每页条数\r\n            },\r\n            gameNameList: [],\r\n            dataList: [],\r\n            total: 0\r\n        }\r\n    },\r\n\r\n    created() {\r\n        this.handelSelect()\r\n        this.handleQuery()\r\n    },\r\n\r\n    methods: {\r\n        //游戏名称下拉列表\r\n        handelSelect() {\r\n            getGameNameList().then(res => {\r\n                if (res.code == 200) {\r\n                    this.gameNameList = res.data\r\n                }\r\n            })\r\n        },\r\n\r\n        //处理游戏名称\r\n        handeleGameName(gameName) {\r\n            let obj = this.gameNameList.find(item => item.id == gameName)\r\n            return obj ? obj.name : ''\r\n        },\r\n\r\n        //查询按钮\r\n        handleQuery() {\r\n            this.dataList = []\r\n            let params = {\r\n                ...this.form\r\n            }\r\n            params.startTime = moment(this.dateRange[0]).startOf(\"day\").format('YYYY-MM-DD HH:mm:ss')\r\n            params.endTime = moment(this.dateRange[1]).endOf(\"day\").format('YYYY-MM-DD HH:mm:ss')\r\n\r\n            getDataList(params).then(res => {\r\n                if (res.code == 200) {\r\n                    this.dataList = res.result\r\n                    console.log(this.dataList)\r\n                    this.total = res.total\r\n                }\r\n            })\r\n        },\r\n\r\n        //重置按钮\r\n        resetQuery() {\r\n            this.form = {}\r\n            this.dateRange = []\r\n        },\r\n\r\n        //修改状态\r\n        handelState(row){\r\n            this.$confirm(`确认${row.state == 0 ? '开启' : '关闭'} ${row.userName} 的状态吗?`, '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            }).then(() => {\r\n                let params = {\r\n                    userId: row.userId,\r\n                    state: row.state\r\n                }\r\n                console.log(params)\r\n                editgameState(params).then(res =>{\r\n                    if(res.code == 200){\r\n                        this.$message.success(`${row.state == 0 ? '开启' : '关闭'}成功!`)\r\n                        this.handleQuery()\r\n                    }\r\n                })\r\n                \r\n            }).catch(() => {\r\n                row.state == 0 ? row.state = '1' : row.state = '0'\r\n            })\r\n        },\r\n\r\n        //明细按钮\r\n        handleClick(row) {\r\n            this.$refs.isDetails.open({\r\n                gameName: this.handeleGameName( row.gameName ),\r\n                userName: row.userName,\r\n                gameRoomId: row.gameRoomId,\r\n                userId: row.userId,\r\n            })\r\n        },\r\n\r\n        handleSizeChange(val) {\r\n            this.form.pageSize = val\r\n            this.handleQuery() \r\n        },\r\n        handleCurrentChange(val) {\r\n            this.form.pageNum = val\r\n            this.handleQuery() \r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n::v-deep .el-table .el-table__cell{\r\n    padding: 8px 0\r\n}\r\n.el-pagination{\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    margin-top: 15px;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}